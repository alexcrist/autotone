(()=>{class e extends AudioWorkletProcessor{_buffer;_bufferIndex;_bufferSize;_osamp;constructor(e){super(),this.port.onmessage=this.handleMessage.bind(this),this._bufferSize=e.parameterData.bufferSize,this._osamp=e.parameterData.osamp,this._buffer=new Float32Array(this._bufferSize),this.reset()}handleMessage(e){const{type:s}=e.data;"reset"===s&&this.reset()}reset(){this._bufferIndex=0}process(e){const s=e[0][0];if(s)for(let e=0;e<s.length;e++)this._buffer[this._bufferIndex]=s[e],this._bufferIndex++,this._bufferIndex===this._bufferSize&&this.flushBuffer();return!0}flushBuffer(){this.port.postMessage(new Float32Array(this._buffer));const e=this._bufferSize/this._osamp;for(let s=0;s<this._bufferSize-e;s++)this._buffer[s]=this._buffer[s+e];this._bufferIndex-=e}}registerProcessor("buffer-processor",e)})();